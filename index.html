<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<title>‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Å‡∏•‡πâ‡∏≠‡∏á‡∏´‡∏•‡∏±‡∏á + ‡∏ñ‡πà‡∏≤‡∏¢‡∏†‡∏≤‡∏û</title>
<style>
video, img { width: 90%; max-width: 400px; margin: 10px auto; display:block; border: 1px solid #ccc; }
button { margin: 10px; padding: 8px; width: 80%; max-width: 400px; }
</style>
</head>
<body>
<h2>‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Å‡∏•‡πâ‡∏≠‡∏á‡∏´‡∏•‡∏±‡∏á + ‡∏ñ‡πà‡∏≤‡∏¢‡∏†‡∏≤‡∏û</h2>
<video id="camera" autoplay playsinline></video>
<button id="captureBtn">üì∏ ‡∏ñ‡πà‡∏≤‡∏¢‡∏†‡∏≤‡∏û</button>
<img id="snapshotImage">

<script>
const video = document.getElementById('camera');
const img = document.getElementById('snapshotImage');

// ‡πÄ‡∏õ‡∏¥‡∏î‡∏Å‡∏•‡πâ‡∏≠‡∏á‡∏´‡∏•‡∏±‡∏á
navigator.mediaDevices.getUserMedia({ video: { facingMode: { exact: "environment" } } })
  .then(stream => video.srcObject = stream)
  .catch(err => {
    console.log("‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏õ‡∏¥‡∏î‡∏Å‡∏•‡πâ‡∏≠‡∏á‡∏´‡∏•‡∏±‡∏á‡πÑ‡∏î‡πâ, fallback ‡∏Å‡∏•‡πâ‡∏≠‡∏á‡∏´‡∏ô‡πâ‡∏≤", err);
    navigator.mediaDevices.getUserMedia({ video: true })
      .then(stream => video.srcObject = stream)
      .catch(err2 => alert('‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏õ‡∏¥‡∏î‡∏Å‡∏•‡πâ‡∏≠‡∏á‡πÑ‡∏î‡πâ: ' + err2));
  });

// ‡∏ñ‡πà‡∏≤‡∏¢‡∏†‡∏≤‡∏û
document.getElementById('captureBtn').onclick = () => {
  const canvas = document.createElement('canvas');
  canvas.width = video.videoWidth;
  canvas.height = video.videoHeight;
  canvas.getContext('2d').drawImage(video, 0, 0);
  const dataURL = canvas.toDataURL('image/png');
  img.src = dataURL;
};
</script>
</body>
</html>
